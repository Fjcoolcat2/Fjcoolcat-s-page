<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>MineCord</title>
<style>
* {margin:0;padding:0;box-sizing:border-box;font-family:Arial;}
body {display:flex;height:100vh;background:#313338;color:white;}

/* SERVER BAR */
.server-bar{
  width:72px;
  background:#1e1f22;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:10px 0;
  gap:10px;
}
.server{
  width:48px;height:48px;border-radius:50%;
  background:linear-gradient(135deg,#ff4fd8,#8a2be2);
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;font-weight:bold;
}
.server.active{border:3px solid white;}
.add-server{
  width:48px;height:48px;border-radius:50%;
  background:#2b2d31;display:flex;align-items:center;
  justify-content:center;cursor:pointer;font-size:22px;
}

/* CHANNEL BAR */
.channels{
  width:240px;background:#2b2d31;
  display:flex;flex-direction:column;
}
.server-name{
  padding:15px;text-align:center;
  background:linear-gradient(90deg,#ff4fd8,#8a2be2);
  font-weight:bold;
}
.channel-list{flex:1;padding:10px;}
.channel{
  padding:8px;border-radius:6px;
  cursor:pointer;color:#b5bac1;
}
.channel:hover{background:#393c43;color:white;}
.channel.active{background:#404249;color:white;}
.add-channel{
  padding:8px;margin-top:10px;
  background:#393c43;border-radius:6px;
  text-align:center;cursor:pointer;
}

/* CHAT */
.chat{flex:1;display:flex;flex-direction:column;}
.chat-header{
  padding:15px;border-bottom:1px solid black;
}
.messages{flex:1;padding:20px;overflow-y:auto;}
.message{margin-bottom:10px;}
.username{
  font-weight:bold;
  background:linear-gradient(90deg,#ff4fd8,#8a2be2);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.input-area{padding:10px;border-top:1px solid black;}
input{
  width:100%;padding:10px;border:none;
  background:#383a40;color:white;border-radius:8px;
}
</style>
</head>
<body>

<div class="server-bar" id="serverBar">
  <div class="add-server" onclick="createServer()">+</div>
</div>

<div class="channels">
  <div class="server-name" id="serverName">No Server</div>
  <div class="channel-list" id="channelList"></div>
  <div class="add-channel" onclick="createChannel()">+ Add Channel</div>
</div>

<div class="chat">
  <div class="chat-header" id="chatTitle">Select a channel</div>
  <div class="messages" id="messages"></div>
  <div class="input-area">
    <input id="messageInput" placeholder="Message..." onkeydown="sendMessage(event)">
  </div>
</div>

<script>
let servers = JSON.parse(localStorage.getItem("minecord")) || [];
let currentServer = null;
let currentChannel = null;

function save(){
  localStorage.setItem("minecord", JSON.stringify(servers));
}

function renderServers(){
  const bar = document.getElementById("serverBar");
  bar.innerHTML = '<div class="add-server" onclick="createServer()">+</div>';
  servers.forEach((s,i)=>{
    const div = document.createElement("div");
    div.className="server"+(currentServer===i?" active":"");
    div.innerText=s.name[0].toUpperCase();
    div.onclick=()=>selectServer(i);
    bar.appendChild(div);
  });
}

function createServer(){
  const name = prompt("Server name?");
  if(!name) return;
  servers.push({name,channels:[]});
  save();
  renderServers();
}

function selectServer(i){
  currentServer=i;
  currentChannel=null;
  renderServers();
  renderChannels();
  document.getElementById("serverName").innerText=servers[i].name;
  document.getElementById("messages").innerHTML="";
  document.getElementById("chatTitle").innerText="Select a channel";
}

function renderChannels(){
  const list=document.getElementById("channelList");
  list.innerHTML="";
  if(currentServer===null) return;
  servers[currentServer].channels.forEach((c,i)=>{
    const div=document.createElement("div");
    div.className="channel"+(currentChannel===i?" active":"");
    div.innerText="# "+c.name;
    div.onclick=()=>selectChannel(i);
    list.appendChild(div);
  });
}

function createChannel(){
  if(currentServer===null) return alert("Select server first");
  const name=prompt("Channel name?");
  if(!name) return;
  servers[currentServer].channels.push({name,messages:[]});
  save();
  renderChannels();
}

function selectChannel(i){
  currentChannel=i;
  renderChannels();
  renderMessages();
  document.getElementById("chatTitle").innerText="# "+servers[currentServer].channels[i].name;
}

function renderMessages(){
  const box=document.getElementById("messages");
  box.innerHTML="";
  if(currentChannel===null) return;
  servers[currentServer].channels[currentChannel].messages.forEach(m=>{
    box.innerHTML+=`
      <div class="message">
        <span class="username">${m.user}</span>: ${m.text}
      </div>
    `;
  });
}

function sendMessage(e){
  if(e.key==="Enter"){
    if(currentChannel===null) return;
    const input=document.getElementById("messageInput");
    if(!input.value.trim()) return;
    servers[currentServer].channels[currentChannel].messages.push({
      user:"User",
      text:input.value
    });
    input.value="";
    save();
    renderMessages();
  }
}

renderServers();
</script>

</body>
</html>
