<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Tavern</title>

<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600;800&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

<style>
/* ===== BASIC THEME ===== */
body {
    margin: 0;
    font-family: 'Inter', sans-serif;
    background: radial-gradient(circle at top, #2d1b4e, #0a0a0f);
    color: white;
}

button {
    cursor: pointer;
}

.hidden { display: none; }

/* ===== HEADER ===== */
header {
    text-align: center;
    padding: 40px 20px;
}

.main-title {
    font-family: 'Cinzel', serif;
    font-size: 4rem;
    background: linear-gradient(180deg, #fff, gold);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

/* ===== LOGIN ===== */
.login-section {
    max-width: 600px;
    margin: auto;
    padding: 20px;
}

.login-form {
    display: grid;
    gap: 10px;
}

input {
    padding: 12px;
    border-radius: 8px;
    border: none;
}

.btn-primary {
    background: gold;
    color: black;
    padding: 12px;
    font-weight: bold;
    border-radius: 8px;
}

/* ===== ITEMS ===== */
.items-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 20px;
    padding: 20px;
}

.item-card {
    background: rgba(255,255,255,0.05);
    border-radius: 16px;
    padding: 20px;
}

.price {
    color: gold;
    font-size: 1.5rem;
    font-weight: bold;
}

.add-to-bulk {
    margin-top: 10px;
    padding: 10px;
    width: 100%;
    background: purple;
    border-radius: 20px;
    border: none;
    color: white;
}

/* ===== MODAL ===== */
.chat-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.85);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 999;
}

.chat-overlay.show {
    display: flex;
}

.chat-container {
    background: #141420;
    border-radius: 16px;
    width: 90%;
    max-width: 450px;
}

.chat-header {
    padding: 15px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    display: flex;
    justify-content: space-between;
}

.close-chat {
    background: none;
    color: red;
    border: none;
    font-size: 1.5rem;
}

.order-type-select,
.quantity-input {
    width: 100%;
    margin-bottom: 15px;
    padding: 10px;
    border-radius: 8px;
}

.btn-submit-order {
    width: 100%;
    padding: 12px;
    background: gold;
    border-radius: 8px;
    border: none;
    font-weight: bold;
}

/* ===== TOAST ===== */
.toast {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    background: black;
    border: 1px solid gold;
    padding: 12px 25px;
    border-radius: 20px;
    display: none;
}

.toast.show {
    display: block;
}
</style>
</head>

<body>

<header>
    <h1 class="main-title">THE TAVERN</h1>
    <p>Premium Minecraft Emporium</p>
</header>

<!-- LOGIN -->
<div class="login-section">
    <div id="loginForm" class="login-form">
        <input id="usernameInput" placeholder="Username">
        <input id="discordInput" placeholder="Discord">
        <input id="minecraftInput" placeholder="Minecraft IGN">
        <button class="btn-primary" onclick="login()">Enter Shop</button>
    </div>

    <div id="userInfo" class="hidden">
        Welcome, <strong id="currentUser"></strong>
        <button onclick="logout()">Exit</button>
    </div>
</div>

<!-- ITEMS -->
<div id="itemsContainer" class="items-grid"></div>

<!-- ADD TO BULK MODAL -->
<div id="addToBulkModal" class="chat-overlay">
    <div class="chat-container">
        <div class="chat-header">
            <strong>Add to Bulk</strong>
            <button class="close-chat" onclick="closeAddToBulkModal()">Ã—</button>
        </div>

        <div style="padding:20px">
            <h3 id="bulkItemName"></h3>

            <select id="bulkOrderType" class="order-type-select">
                <option value="item">Item</option>
                <option value="stacks">Stacks</option>
                <option value="shulker">Shulker</option>
            </select>

            <input id="bulkQuantity" type="number" class="quantity-input" min="1" value="1">

            <button class="btn-submit-order" onclick="confirmAddToBulk()">Add to Bulk</button>
        </div>
    </div>
</div>

<div id="toast" class="toast"></div>

<script>
/* ===== DATA ===== */
let items = [
    { id: 1, name: "Elytra", price: "40 d" },
    { id: 2, name: "Heavy Core", price: "18 d" }
];

let currentUser = null;
let userBulkOrder = JSON.parse(localStorage.getItem("bulk")) || [];
let pendingBulkItemId = null;

/* ===== LOGIN ===== */
function login() {
    const u = usernameInput.value.trim();
    const d = discordInput.value.trim();
    const m = minecraftInput.value.trim();
    if (!u || !d || !m) return showToast("Fill all fields");
    currentUser = u;
    currentUserEl.textContent = u;
    loginForm.classList.add("hidden");
    userInfo.classList.remove("hidden");
    renderItems();
}

function logout() {
    currentUser = null;
    loginForm.classList.remove("hidden");
    userInfo.classList.add("hidden");
}

/* ===== RENDER ITEMS ===== */
function renderItems() {
    itemsContainer.innerHTML = "";
    items.forEach(item => {
        const div = document.createElement("div");
        div.className = "item-card";
        div.innerHTML = `
            <h3>${item.name}</h3>
            <div class="price">${item.price}</div>
            ${currentUser ? `<button class="add-to-bulk" onclick="openAddToBulk(${item.id})">Add to Bulk</button>` : ""}
        `;
        itemsContainer.appendChild(div);
    });
}

/* ===== BULK MODAL ===== */
function openAddToBulk(id) {
    pendingBulkItemId = id;
    const item = items.find(i => i.id === id);
    bulkItemName.textContent = item.name;
    bulkOrderType.value = "item";
    bulkQuantity.value = 1;
    addToBulkModal.classList.add("show");
}

function closeAddToBulkModal() {
    addToBulkModal.classList.remove("show");
    pendingBulkItemId = null;
}

function confirmAddToBulk() {
    const item = items.find(i => i.id === pendingBulkItemId);
    userBulkOrder.push({
        id: item.id,
        name: item.name,
        price: item.price,
        orderType: bulkOrderType.value,
        quantity: parseInt(bulkQuantity.value)
    });
    localStorage.setItem("bulk", JSON.stringify(userBulkOrder));
    closeAddToBulkModal();
    showToast("Added to bulk");
}

/* ===== TOAST ===== */
function showToast(msg) {
    toast.textContent = msg;
    toast.classList.add("show");
    setTimeout(() => toast.classList.remove("show"), 2500);
}

/* ===== SHORTCUTS ===== */
const usernameInput = document.getElementById("usernameInput");
const discordInput = document.getElementById("discordInput");
const minecraftInput = document.getElementById("minecraftInput");
const currentUserEl = document.getElementById("currentUser");
const loginForm = document.getElementById("loginForm");
const userInfo = document.getElementById("userInfo");
const itemsContainer = document.getElementById("itemsContainer");
const addToBulkModal = document.getElementById("addToBulkModal");
const bulkItemName = document.getElementById("bulkItemName");
const bulkOrderType = document.getElementById("bulkOrderType");
const bulkQuantity = document.getElementById("bulkQuantity");
const toast = document.getElementById("toast");
</script>

</body>
</html>
