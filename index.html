<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Tavern - Premium Minecraft Emporium</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;800&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        /* All your provided CSS styles go here */
        :root {
            --gold-primary: #ffd700; --gold-light: #ffed4e; --gold-dark: #b8860b;
            --purple-deep: #1a0b2e; --purple-mid: #2d1b4e; --purple-light: #4a3b6e;
            --accent-blue: #4fc3f7; --accent-red: #ff5252; --accent-green: #69f0ae;
            --chat-bg: rgba(20, 20, 30, 0.95); --mod-blue: #2196f3; --mod-blue-light: #64b5f6;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', sans-serif;
            background: radial-gradient(ellipse at top, var(--purple-mid) 0%, transparent 50%),
                        radial-gradient(ellipse at bottom, var(--purple-deep) 0%, #0a0a0f 100%),
                        linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            background-attachment: fixed; min-height: 100vh; color: #fff; overflow-x: hidden;
        }
        .container { position: relative; z-index: 1; max-width: 1400px; margin: 0 auto; padding: 20px; }
        .main-title {
            font-family: 'Cinzel', serif; font-size: 5rem; text-align: center;
            background: linear-gradient(180deg, #fff 0%, var(--gold-primary) 50%, var(--gold-dark) 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 20px rgba(255,215,0,0.4));
        }
        /* ... (Include all other CSS from your snippet) ... */
        .login-section, .admin-controls, .mod-controls, .stats-bar { display: none; }
        .show { display: block !important; }
        .flex-show { display: flex !important; }
        .grid-show { display: grid !important; }
        
        /* Temporary fix for display logic */
        #login-container { display: block; }
        .item-card { background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px; border: 1px solid rgba(255,215,0,0.1); display: flex; justify-content: space-between; align-items: center; }
        .items-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px; }
    </style>
</head>
<body>

<div class="location-bar">
    <div class="location-text"><span>üìç</span> SERVER LOCATION: X: 4500, Z: -1200 (SHOPPING DISTRICT)</div>
</div>

<div class="container">
    <header>
        <h1 class="main-title">THE TAVERN</h1>
        <div class="shop-owners">ESTABLISHED BY THE ELDERS</div>
    </header>

    <section id="login-container" class="login-section show">
        <div class="login-form">
            <input type="text" id="username-input" placeholder="Minecraft Username...">
            <button class="btn-primary" onclick="app.login()">Enter Tavern</button>
        </div>
    </section>

    <section id="user-info" class="user-info">
        <div class="welcome-text">Greetings, <span id="player-name" class="username">Adventurer</span></div>
        <div class="user-actions">
            <button class="btn-chat" onclick="app.openChat('global')">Global Chat</button>
            <button class="btn-support" onclick="app.openChat('support')">Support</button>
            <button class="btn-danger" onclick="location.reload()">Logout</button>
        </div>
    </section>

    <section id="admin-panel" class="admin-controls">
        <h2 class="admin-title">üëë Vault Management</h2>
        <div class="add-item-form">
            <input type="text" id="new-item-name" placeholder="Item Name">
            <input type="number" id="new-item-price" placeholder="Price (Diamonds)">
            <button class="btn-success" onclick="app.addItem()">Add to Stock</button>
        </div>
    </section>

    <div id="stats-panel" class="stats-bar">
        <div class="stat-card"><div class="stat-value">124</div><div class="stat-label">Daily Sales</div></div>
        <div class="stat-card"><div class="stat-value">12k</div><div class="stat-label">Total Revenue</div></div>
    </div>

    <div class="tabs-container">
        <div class="tabs">
            <div class="tab active" onclick="app.filter('all')">All Items</div>
            <div class="tab" onclick="app.filter('materials')">Materials</div>
            <div class="tab" onclick="app.filter('tools')">Enchanted Tools</div>
            <div class="tab" onclick="app.filter('combat')">Combat</div>
        </div>
    </div>

    <div id="items-grid" class="items-grid">
        </div>
</div>

<div id="chat-overlay" class="chat-overlay">
    <div class="chat-container">
        <div class="chat-header">
            <div class="chat-title">TAVERN CHAT <span id="chat-type" class="chat-type-badge">Global</span></div>
            <button class="close-chat" onclick="app.closeChat()">√ó</button>
        </div>
        <div class="chat-messages" id="chat-box">
            <div class="chat-message other">
                <div class="message-header"><span class="message-author">Innkeeper</span></div>
                <div class="message-content">Welcome to the Tavern! Use the tabs to browse our wares.</div>
            </div>
        </div>
    </div>
</div>

<script>
    const app = {
        user: { name: '', role: 'customer' },
        inventory: [
            { name: "Netherite Ingot", price: 64, cat: "materials", stock: "in-stock" },
            { name: "Enchanted Elytra", price: 128, cat: "tools", stock: "limited" },
            { name: "Mending Book", price: 32, cat: "tools", stock: "in-stock" },
            { name: "God Apple", price: 48, cat: "combat", stock: "out-of-stock" }
        ],

        login() {
            const name = document.getElementById('username-input').value;
            if (!name) return alert("Enter a name!");
            
            this.user.name = name;
            // Role Logic: Names including "Admin" or "Mod" unlock panels
            if (name.toLowerCase().includes('admin')) this.user.role = 'owner';
            else if (name.toLowerCase().includes('mod')) this.user.role = 'mod';

            document.getElementById('login-container').classList.remove('show');
            document.getElementById('user-info').classList.add('flex-show');
            document.getElementById('player-name').innerText = name;

            if (this.user.role === 'owner') {
                document.getElementById('admin-panel').classList.add('show');
                document.getElementById('stats-panel').classList.add('grid-show');
            }
            this.render();
        },

        render(filter = 'all') {
            const container = document.getElementById('items-grid');
            container.innerHTML = '';
            
            this.inventory.forEach(item => {
                if (filter !== 'all' && item.cat !== filter) return;
                
                const card = document.createElement('div');
                card.className = 'item-card';
                card.innerHTML = `
                    <div>
                        <div class="item-name">${item.name}</div>
                        <span class="tag tag-item">${item.cat}</span>
                        <div class="price">${item.price} Diamonds</div>
                    </div>
                    <div style="text-align:right">
                        <div class="stock-status ${item.stock}">${item.stock.replace('-', ' ')}</div>
                        <button class="add-to-bulk" style="margin-top:10px">Purchase</button>
                    </div>
                `;
                container.appendChild(card);
            });
        },

        filter(cat) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            this.render(cat);
        },

        openChat(type) {
            document.getElementById('chat-type').innerText = type;
            document.getElementById('chat-overlay').classList.add('flex-show');
        },

        closeChat() {
            document.getElementById('chat-overlay').classList.remove('flex-show');
        }
    };

    // Initial load
    app.render();
</script>
</body>
</html>
